name: Testing Workflow with Cypress
on: workflow_dispatch
jobs:
  testing:
    continue-on-error: true
    runs-on: ubuntu-latest
    container:
      image: cypress/browsers:node-20.6.1-chrome-116.0.5845.187-1-ff-117.0-edge-116.0.1938.76-1
      options: --user 1001
    steps:
      - name: Get the code
        uses: actions/checkout@v4
      - name: Cahce deps
        uses: actions/cache@v3
        with:
          path: ~/.npm
          key: node-modules-${{hashFiles('**/package-lock.json')}}
      - name: Project dependencies install
        run: npm i --force
      - name: Run tests
        uses: cypress-io/github-action@v6
        with:
          start: npm start
          wait-on: "http://localhost:4200"
          browser: chrome
